# AZ_03
### AZ03. –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ Matplotlib. –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏–∞–≥—Ä–∞–º–º –∏ –≥—Ä–∞—Ñ–∏–∫–æ–≤
---
–°–æ–∑–¥–∞–¥–∏–º –Ω–µ–±–æ–ª—å—à–æ–π –∫–µ–π—Å —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –≥—Ä–∞—Ñ–∏–∫–æ–≤.
#–°–æ–∑–¥–∞—ë–º —Ñ–∞–π–ª —Å —Ü–µ–Ω–∞–º–∏:

from selenium import webdriver
from selenium.webdriver.common.by import By
from selenium.webdriver.chrome.service import Service
import time
# –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –º–æ–¥—É–ª—å CSV
import csv
# –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º Google Chrome, —Ç–æ –ø–∏—à–µ–º driver = webdriver.Chrome()
driver = webdriver.Firefox()

# URL —Å—Ç—Ä–∞–Ω–∏—Ü—ã
url = 'https://www.cian.ru/snyat-kvartiru-1-komn-ili-2-komn/'

# –û—Ç–∫—Ä—ã—Ç–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
driver.get(url)

# –ñ–¥–µ–º –Ω–µ–∫–æ—Ç–æ—Ä–æ–µ –≤—Ä–µ–º—è, —á—Ç–æ–±—ã —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–≥—Ä—É–∑–∏–ª–∞—Å—å
time.sleep(5)

# –ü–∞—Ä—Å–∏–Ω–≥ —Ü–µ–Ω
prices = driver.find_elements(By.XPATH, "//span[@data-mark='MainPrice']/span")
---
# –û—Ç–∫—Ä—ã—Ç–∏–µ CSV —Ñ–∞–π–ª–∞ –¥–ª—è –∑–∞–ø–∏—Å–∏
with open('prices.csv', mode='w', newline='', encoding='utf-8') as file:
   writer = csv.writer(file)
   writer.writerow(['Price'])  # –ó–∞–ø–∏—Å—ã–≤–∞–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç–æ–ª–±—Ü–∞

 # –ó–∞–ø–∏—Å—ã–≤–∞–µ–º —Ü–µ–Ω—ã –≤ CSV —Ñ–∞–π–ª
   for price in prices:
       writer.writerow([price.text])
# –ó–∞–∫—Ä—ã—Ç–∏–µ –¥—Ä–∞–π–≤–µ—Ä–∞
driver.quit()

–°–µ–π—á–∞—Å —Ü–µ–Ω—ã –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ —Ñ–∞–π–ª–µ. –ù–æ –≤—Å—ë –Ω–∞–ø–∏—Å–∞–Ω–Ω–æ–µ —Å—á–∏—Ç–∞–µ—Ç—Å—è —Ç–µ–∫—Å—Ç–æ–º. –ù–∞–º –Ω—É–∂–Ω–æ —É–±—Ä–∞—Ç—å –Ω–µ—á–∏—Å–ª–æ–≤—É—é —á–∞—Å—Ç—å –∏ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å —á–∏—Å–ª–∞ –≤ —á–∏—Å–ª–æ–≤–æ–π —Ñ–æ—Ä–º–∞—Ç.

–°–æ–∑–¥–∞—ë–º –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª.
–û—Ç–ø—Ä–∞–≤–ª—è–µ–º –ù–µ–π—Ä–æ–∫–æ—Ç—É –∑–∞–ø—Ä–æ—Å:
‚úçüèª –ù—É–∂–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ csv —Ñ–∞–π–ª–µ, –Ω—É–∂–Ω–æ —É–±—Ä–∞—Ç—å –≤ –∫–æ–Ω—Ü–µ –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ—á–∫–∏ ‚ÇΩ/–º–µ—Å. –∏ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å –≤ —Ç–∏–ø –¥–∞–Ω–Ω—ã—Ö —á–∏—Å–ª–æ
–ù–∞–ø–∏—à–∏ –∫–æ–¥ –Ω–∞ Python
---
–í—Å—Ç–∞–≤–ª—è–µ–º –∏ –ø—Ä–æ–≤–µ—Ä—è–µ–º –∫–æ–¥:
import csv
def clean_price(price):
   # –£–¥–∞–ª—è–µ–º "‚ÇΩ/–º–µ—Å." –∏ –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –≤ —á–∏—Å–ª–æ
   return int(price.replace(' ‚ÇΩ/–º–µ—Å.', '').replace(' ', ''))
# –ß—Ç–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ CSV —Ñ–∞–π–ª–∞ –∏ –∏—Ö –æ–±—Ä–∞–±–æ—Ç–∫–∞
input_file = 'prices.csv'
output_file = 'cleaned_prices.csv'
with open(input_file, mode='r', encoding='utf-8') as infile, open(output_file, mode='w', newline='', encoding='utf-8') as outfile:
   reader = csv.reader(infile)
   writer = csv.writer(outfile)
   # –ß–∏—Ç–∞–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∏ –∑–∞–ø–∏—Å—ã–≤–∞–µ–º –µ–≥–æ –≤ –Ω–æ–≤—ã–π —Ñ–∞–π–ª
   header = next(reader)
   writer.writerow(header)

 # –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –∏ –∑–∞–ø–∏—Å—ã–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ —Å—Ç—Ä–æ–∫
   for row in reader:
       clean_row = [clean_price(row[0])]
       writer.writerow(clean_row)
print(f"–û–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ —Ñ–∞–π–ª {output_file}")  
–°–æ–∑–¥–∞—ë–º –≥—Ä–∞—Ñ–∏–∫:
–°–æ–∑–¥–∞—ë–º –Ω–æ–≤—ã–π —Ñ–∞–π–ª.
–û—Ç–ø—Ä–∞–≤–ª—è–µ–º –ù–µ–π—Ä–æ–∫–æ—Ç—É –∑–∞–ø—Ä–æ—Å:
‚úç–ù—É–∂–Ω–æ –ø–æ—Å—Ç—Ä–æ–∏—Ç—å –≥—Ä–∞—Ñ–∏–∫ –≥–∏—Å—Ç–æ–≥—Ä–∞–º–º—É –¥–ª—è –ø–æ–ª—É—á–∏–≤—à–∏—Ö—Å—è —Ü–µ–Ω –∏–∑ —Ñ–∞–π–ª–∞ ‚Äùcleaned_prices.csv‚Äù —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –º–æ–¥—É–ª—è matplotlib

---
–í—Å—Ç–∞–≤–ª—è–µ–º –∏ –ø—Ä–æ–≤–µ—Ä—è–µ–º –∫–æ–¥:
import pandas as pd
import matplotlib.pyplot as plt
# –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ CSV-—Ñ–∞–π–ª–∞
file_path = 'cleaned_prices.csv'
data = pd.read_csv(file_path)
# –ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, —á—Ç–æ —Å—Ç–æ–ª–±–µ—Ü —Å —Ü–µ–Ω–∞–º–∏ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è 'price'
prices = data['Price']
# –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –≥–∏—Å—Ç–æ–≥—Ä–∞–º–º—ã
plt.hist(prices, bins=10, edgecolor='black')  
# –ú—ã –º–æ–∂–µ–º –∏–∑–º–µ–Ω–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ bin-–æ–≤ –ø–æ —Å–≤–æ–µ–º—É —É—Å–º–æ—Ç—Ä–µ–Ω–∏—é
# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–∞ –∏ –º–µ—Ç–æ–∫ –æ—Å–µ–π
plt.title('–ì–∏—Å—Ç–æ–≥—Ä–∞–º–º–∞ —Ü–µ–Ω')
plt.xlabel('–¶–µ–Ω–∞')
plt.ylabel('–ß–∞—Å—Ç–æ—Ç–∞')
# –ü–æ–∫–∞–∑–∞—Ç—å –≥–∏—Å—Ç–æ–≥—Ä–∞–º–º—É
plt.show()
